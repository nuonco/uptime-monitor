# =============================================================================
# NUON KUBERNETES MANIFEST COMPONENT - UI Deployment
# =============================================================================
#
# Deploys raw Kubernetes YAML manifests to the customer's cluster.
#
# Schema: https://api.nuon.co/v1/general/config-schema?type=kubernetes-manifest
#
# -----------------------------------------------------------------------------
# CONFIGURATION KEYS
# -----------------------------------------------------------------------------
#
#   name          (required)  Component identifier for template references
#   type          (required)  Must be "kubernetes_manifest"
#   namespace     (required)  Kubernetes namespace for deployment
#   manifest      (required)  Path to manifest YAML or inline YAML content
#   dependencies  (optional)  Components that must deploy first
#
# -----------------------------------------------------------------------------
# MANIFEST LOCATION
# -----------------------------------------------------------------------------
#
# The Kubernetes manifest is in: ./2-ui/manifest.yaml (relative to this file)
#
# =============================================================================


# Component name.
name = "ui"

# Component type for Kubernetes manifests.
type = "kubernetes_manifest"

# Dependencies ensure the image is built and API is deployed first.
# The UI depends on the API being available.
dependencies = ["ui_image", "api"]

# Kubernetes namespace.
namespace = "default"

# Path to manifest file.
manifest = "./2-ui/manifest.yaml"


# -----------------------------------------------------------------------------
# DRIFT DETECTION
# -----------------------------------------------------------------------------
# Detect when UI deployment has been modified outside of Nuon.
# Useful for the drift demo - manually scale or modify the deployment via
# kubectl, then trigger a drift scan to see Nuon detect the changes.
drift_schedule = "*/10 * * * *"  # Every 10 minutes
